<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Mindfulness Bodyscan Vorwort</title>
    <link rel="stylesheet" href="css/mindf-bodyscan.css">
	<script src="phonegap.js"></script>
    
    <script src="js/index.js"></script>
	<script type="text/javascript" charset="utf-8" src="cordova-x.x.x.js"></script>
    
	<script type="text/javascript" charset="utf-8">
	// Audio player
	var my_media = null;
	var mediaTimer = null;
	
	// Wait for device API libraries to load
	document.addEventListener("deviceready", onDeviceReady, false);

	// device APIs are available
	function onDeviceReady() {
		my_media = new Media(rootPath + "mp3/Spor01.mp3", onSuccess, onError);
		playAudio(my_media);
	}
	
	/*if(my_media != null){
		my_media.stop();
		my_media.release();
		my_media = null;
	}*/

	// Play audio
	function playAudio(my_media) {
		my_media.play();

		// Update my_media position every second
		if (mediaTimer == null) {
			mediaTimer = setInterval(function() {
				// get my_media position
				my_media.getCurrentPosition(
					// success callback
					function(position) {
						if (position > -1) {
							setAudioPosition((position) + " sec");
						}
					},
					// error callback
					function(e) {
						console.log("Error getting pos=" + e);
						setAudioPosition("Error: " + e);
					}
				);
			}, 1000);
        }
    }

	// Pause audio
	function pauseAudio() {
		if (my_media) {
			my_media.pause();
		}
	}
	
	// Stop audio
	//
	function stopAudio() {
		if (my_media) {
			my_media.stop();
		}
		clearInterval(mediaTimer);
		mediaTimer = null;
	}

	// onSuccess Callback
	//
	function onSuccess() {
		console.log("playAudio():Audio Success");
	}

	// onError Callback
	//
	function onError(error) {
		alert('code: '    + error.code    + '\n' +
			  'message: ' + error.message + '\n');
		alert(location.href);
		console.log(error.code);
	}
	
	// Set audio position
	function setAudioPosition(position) {
		document.getElementById('audio_position').innerHTML = Math.round(position).toString();
	}
	
	</script>
</head>

<body style="background-image:url(img/backgroundT1.jpg);">
	<div id="wrapper">
    	<div class="section group">
                <div class="col span_4_of_4">
                	<img src="img/Headline1.png" width="337" height="142" alt="Mindfulness Bodyscan"/><br/>
          			<img src="img/Headline2.png" width="152" height="112" alt="mit Psychologe Silke Rowlin"/>
                </div>
                
                <div class="col span_4_of_4">
                  <div class="trackNameBox">
                     Vorwort
                  </div>
                </div>
                
                <div class="col span_4_of_4">
                  <div class="playButtonContainer">
                     <a href="#" id="playButton" class="smallButton" onclick="playAudio();">&nbsp;</a>
                     <a href="#" id="pauseButton" class="smallButton" onclick="pauseAudio();">&nbsp;</a>
        			 <a href="#" id="stopButton" class="smallButton" onclick="stopAudio();">&nbsp;</a>
                     <p id="audio_position"></p>
                  </div>
                </div>         
      </div>
    </div>
        
</body>
</html>
